
!ELECTRONS Exit from ACCUMULATOR FROM TR;

! end linac -> thin chamber;
TM1: line=(QLE0,DLTM0,DLTM1,QUATM001,QUATM001,DLTM2,QUATM002,QUATM002,BPSTM001,
             DLTM3,QUATM003,QUATM003,DLTM4,CHVTM001,DLTM5,CHVTM002,DLTM6,
             BPFTM01,DLTM7,QUATM004,QUATM004);

! thin chamber -> magnete pulsato;
TM2: line=(THIN1,DLTM8,DHSTB001,DLTM9A,THIN2,DLTM9B,THIN3,DLTM9C,
             CHVTM003,DLTM10,QUATM005,QUATM005,DLTM11,QUATM007,QUATM007,DLTM12,
             QUATM008,QUATM008,DL8A,CHVTM004,DL8,QUATM009,QUATM009,DL9,MDHPTT002);

! TM line;
TMLINE: line=(TM1,TM2);

! magnete pulsato -> bending DHPTT001;
!TT2: line=(D17,FL2TT002,QUATT006,QUATT006,BPSTT004,D16,CHVTT005,D16A);
TT2: line=(D16A,CHVTT005,D16,BPSTT004,QUATT006,QUATT006,FL2TT002,D17);

! bending DHPTT001 -> splitter;
!TT1: line=(BPSTT003,FL2TT001,D15,QUATT005,QUATT005,D14,CHVTT004,D14A,
!           WCMTT001,QUATT004,QUATT004,D13,CHVTT003,D13A,QUATT003,QUATT003,D12,
!           CHVTT002,D12A,BPSTT002,D12B,QUATT002,QUATT002,D11,CHVTT001,
!           D11A,QUATT001,QUATT001,D10,BPSTT001);

TT1: line=(BPSTT001,D10,QUATT001,QUATT001,D11A,CHVTT001,D11,QUATT002,QUATT002,D12B,
           BPSTT002,D12A,CHVTT002,D12,QUATT003,QUATT003,D13A,CHVTT003,D13,
           QUATT004,QUATT004,WCMTT001,D14A,CHVTT004,D14,QUATT005,QUATT005,D15,
           FL2TT001,BPSTT003);

! TT line;

AI_TTLINE: line=(-TT2,DHPTT001,-TT1);

! left transfer line (with vertical bends);

TL3: line=(WCMTL001,BPSTL002,D9,QUATL005,QUATL005,D8A,CHVTL003,FL2TL002,D8);

TL2: line=(D7,QUATL004,QUATL004,D6A,CHVTL002,D6,QUATL003,QUATL003,D5,QUATL002,QUATL002,D4A,
           BPSTL001,CHVTL001,D4);

TL1: line= (D3,QUATL001,QUATL001,D2,FL2TL001);

! TL line;
TLLINE: line=(TL3,DVRTL002,TL2,DVRTL001,TL1);

! accu. splitters injection electrons;
!EINJSPL: line= (SPTA1001,D1,SPTA1002);

! accu.electron  injection septa
ASPTein: LINE= (SPTA1001,D1,SPTA1002);

! endlinac -> accum. inject. (with splitters);
e_AI: line=(TMLINE,AI_TTLINE,DHYTT001,
            TLLINE,ASPTein);

!***********************************************;
! acc. extr e-  FROM ACCUM.  TO TR;

! right tranfer line ;
ASPTeout: LINE= (SPTA2002,D1,SPTA2001);
TR1:  line = (FL2TR001,D2,QUATR001,QUATR001,D3);

TR2: line = (D4,CHVTR001,BPSTR001,D4A,QUATR002,QUATR002,D5,QUATR003,QUATR003,D6,
             CHVTR002,D6A,QUATR004,QUATR004,D7);

TR3: line = (D8,FL2TR002,CHVTR003,D8A,QUATR005,QUATR005,D9,BPSTR002,WCMTR001);
TRLINE: line=(ASPTeout,TR1,DVRTR001,TR2,DVRTR002,TR3);

TT3: line = (D18A,CHVTT006,BPSTT005,D18B,FL1TT001);

TT4: line = (D19,QUATT007,QUATT007,D20);

TT5: line = (KER5,FL1TT002,D21A,CHVTT007,D21B,QUATT008,QUATT008,BPSTT006,D22);

TT6: line = (KER1,D23A,CHVTT008,D23B,QUATT009,QUATT009,BPSTT007,D24);

TT7: line = (KER2,D25A,CHVTT009,BPSTT008,D25B,QUATT010,QUATT010,
             FL1TT003,D26A1,QUATT011,QUATT011,D26A2,CHVTT010,D26B);

TTLINE: line=(TT1,DHPTT001,TT2,DHPTT002,TT3,DHRTT001,TT4,DHSTT001,
              TT5,DVRTT001,TT6,DVRTT002,TT7);

TE1: line = (BPSTE001,D51,KER3);

TE2: line = (D52A,CHVTE001,D52B,QUATE001,QUATE001,D53,BPSTE012);

TE3: line = (KER4,D54,QUATE002,QUATE002,D55A,CHVTE002,D55B,BPSTE002);

TE4: line = (D56,QUATE003,QUATE003,D57A,CHVTE003,D57B,QUATE004,QUATE004,BPSTE003,
             D158,QUATE104,QUATE104,D58,FL1TE001,D59,QUATE105,QUATE105,D159,
             QUATE005,QUATE005,D60A,CHVTE004,D60B,QUATE006,QUATE006,D61,BPSTE004);

TE5: line = (KER6,WCMTE000,D62,MDHRTE03);
TE6: line = (KER7,FL1TE002,D63,QUATE007,QUATE007,D64A,CHVTE005,D64B,
             QUATE008,QUATE008,BPSTE005,D65);
TE7: line = (D66A,CHVTE006,D66B,BPSTE006,QUATE009,QUATE009,
             D67,FL1TE003,WCMTE001);

TELINE: line=(TE1, DVRTE001,TE2,DVRTE002,TE3,DHRTE001,TE4,DHRTE002,
              TE5,DHRTE003,TE6, DVRTE003,TE7,DVRTE004);

e_SPT : line=(D68,SPTEL101,D69,SPTEL102,D70);

! accum -> dafne;

e_AE: line=(TRLINE,DHYTT001,TTLINE,TELINE,e_SPT,FL1EL101);

! ***********************************************;
! positrons

! TP;
 tp1  : line = (D27,QUATP001,QUATP001,D28,mqtp02,
                QUATP002,QUATP002,FL1TP001,D29,Mqtp03,QUATP003,QUATP003,D30);
 tp2  : line = (D31,QUATP004,QUATP004,D32,FL1TP002); 

 p_SPT : line = (SPTPL101,D33,SPTPL102,D34); 

! linac -> accum
 p_Ai: line = (TMLINE,AI_TTLINE,DHYTT001,-TRLINE);

! accum -> dafne
 p_AE : line = (-ASPTein,-TLLINE,DHYTT001,TTLINE,MDHRTP01, DHRTP001,
               tp1, DHRTP002,tp2,p_SPT,FL1PL101);

 return;

